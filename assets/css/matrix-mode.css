/* Matrix Mode Styles */
/* Performance optimization for matrix mode */
@media (prefers-reduced-motion: reduce) {
    .matrix-mode-active * {
        animation: none !important;
        transition: none !important;
        filter: none !important;
    }
}

/* Fallback for devices without GPU acceleration */
@media (max-device-pixel-ratio: 1) {
    .matrix-mode-active {
        /* Disable expensive effects on low-end devices */
        box-shadow: none !important;
        text-shadow: none !important;
        filter: none !important;
    }
    
    .matrix-mode-active * {
        box-shadow: none !important;
        text-shadow: none !important;
        filter: none !important;
        animation: none !important;
    }
    
    .matrix-mode-active .matrix-rain,
    .matrix-mode-active .glitch-effect,
    .matrix-mode-active .matrix-glow {
        display: none !important;
    }
}

/* Simplified matrix mode for low-power devices */
@supports not (filter: hue-rotate(90deg)) {
    .matrix-mode-active {
        background: #000000 !important;
        color: #00ff00 !important;
        font-family: 'Courier New', monospace !important;
        transition: all 0.5s ease;
    }

    .matrix-mode-active * {
        color: #00ff00 !important;
        border-color: #003300 !important;
        background-color: transparent !important;
    }

    /* Matrix Mode Navigation */
    .matrix-mode-active .main-nav {
        background: rgba(0, 0, 0, 0.95) !important;
        border-bottom: 1px solid #00ff00 !important;
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
    }

    .matrix-mode-active .nav-brand .brand-link {
        color: #00ff00 !important;
        text-shadow: 0 0 10px #00ff00;
        font-family: 'Courier New', monospace !important;
    }

    .matrix-mode-active .nav-link:hover {
        color: #ffffff !important;
        text-shadow: 0 0 5px #00ff00;
    }

    /* Matrix Mode Persona Icons */
    .matrix-mode-active .persona-icon {
        background: #000000 !important;
        border: 2px solid #00ff00 !important;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    }

    .matrix-mode-active .persona-icon.active {
        background: #003300 !important;
        box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
    }

    .matrix-mode-active .persona-icons {
        background: #000000 !important;
        border: 1px solid #00ff00 !important;
    }

    /* Hide the entire Persona Selector in Matrix Mode */
    .matrix-mode-active .persona-selector {
        display: none !important;
    }

    /* Matrix Mode Hero Section */
    .matrix-mode-active .hero {
        background: linear-gradient(135deg, #000000 0%, #001100 100%) !important;
    }

    .matrix-mode-active .greeting-badge {
        background: #00ff00 !important;
        color: #000000 !important;
        border: 1px solid #00ff00;
        text-shadow: none;
        animation: matrixGlow 2s ease-in-out infinite alternate;
    }

    .matrix-mode-active .hero-title .highlight {
        background: #00ff00 !important;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 20px #00ff00;
        animation: matrixTitleGlow 3s ease-in-out infinite;
    }

    /* Matrix Mode Buttons */
    .matrix-mode-active .btn-primary {
        background: transparent !important;
        border: 2px solid #00ff00 !important;
        color: #00ff00 !important;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        position: relative;
        overflow: hidden;
    }

    .matrix-mode-active .btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(0, 255, 0, 0.2), transparent);
        transition: left 0.5s ease;
    }

    .matrix-mode-active .btn-primary:hover {
        background: rgba(0, 255, 0, 0.1) !important;
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        text-shadow: 0 0 5px #00ff00;
    }

    .matrix-mode-active .btn-secondary {
        background: transparent !important;
        border: 1px solid #006600 !important;
        color: #00ff00 !important;
    }

    .matrix-mode-active .btn-secondary:hover {
        border-color: #00ff00 !important;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    }

    /* Matrix Mode Terminal */
    .matrix-mode-active .neofetch-terminal {
        background: #000000 !important;
        border: 2px solid #00ff00 !important;
        box-shadow: 
            0 0 30px rgba(0, 255, 0, 0.4),
            inset 0 0 20px rgba(0, 255, 0, 0.1);
    }

    .matrix-mode-active .terminal-header {
        background: #001100 !important;
        border-bottom: 1px solid #00ff00 !important;
    }

    .matrix-mode-active .terminal-title {
        color: #00ff00 !important;
        text-shadow: 0 0 5px #00ff00;
    }

    .matrix-mode-active .neofetch-content {
        background: #000000 !important;
    }

    .matrix-mode-active .neofetch-label {
        color: #00ff00 !important;
        font-weight: bold;
        text-shadow: 0 0 3px #00ff00;
    }

    .matrix-mode-active .neofetch-value {
        color: #ffffff !important;
    }

    /* Matrix Mode Cards */
    .matrix-mode-active .preview-card {
        background: #000000 !important;
        border: 1px solid #00ff00 !important;
        box-shadow: 0 0 15px rgba(0, 255, 0, 0.2);
    }

    .matrix-mode-active .preview-card:hover {
        box-shadow: 0 0 25px rgba(0, 255, 0, 0.4);
        transform: translateY(-5px);
    }

    .matrix-mode-active .preview-card::before {
        background: #00ff00 !important;
    }

    /* Matrix Mode Stats */
    .matrix-mode-active .stat-number {
        color: #00ff00 !important;
        text-shadow: 0 0 10px #00ff00;
        font-family: 'Courier New', monospace !important;
    }

    .matrix-mode-active .stat-label {
        color: #ffffff !important;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    /* Matrix Mode FAB */
    .matrix-mode-active .fab {
        background: #000000 !important;
        border: 2px solid #00ff00 !important;
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.4);
    }

    .matrix-mode-active .fab:hover {
        box-shadow: 0 0 30px rgba(0, 255, 0, 0.6);
    }

    /* Matrix Transition */
    .matrix-transition {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: #000000;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        color: #00ff00;
        font-family: 'Courier New', monospace;
    }

    .matrix-loader {
        text-align: center;
    }

    .glitch-text {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 2rem;
        animation: glitchEffect 0.5s infinite;
    }

    .loading-bar {
        width: 300px;
        height: 20px;
        border: 2px solid #00ff00;
        margin: 2rem auto;
        position: relative;
        overflow: hidden;
    }

    .loading-progress {
        height: 100%;
        background: #00ff00;
        width: 0;
        animation: loadingProgress 1.5s ease-in-out forwards;
        box-shadow: 0 0 10px #00ff00;
    }

    .matrix-code {
        font-size: 0.875rem;
        line-height: 1.2;
        opacity: 0.7;
    }

    .matrix-code span {
        display: block;
        margin-bottom: 0.5rem;
        animation: typewriter 2s ease forwards;
    }

    /* Matrix Rain Effects */
    .matrix-rain-drop {
        font-family: 'Courier New', monospace !important;
        user-select: none;
    }

    .transition-matrix-rain {
        font-family: 'Courier New', monospace !important;
        user-select: none;
    }

    /* Matrix Glitch Effect */
    .matrix-glitch {
        animation: matrixGlitch 0.5s ease-in-out;
    }

    /* Floating Terminal Prompt */
    .floating-terminal-prompt {
        border-radius: 4px;
        font-family: 'Courier New', monospace !important;
        user-select: none;
    }

    /* Matrix Mode Specific Animations */
    @keyframes matrixGlow {
        from { 
            box-shadow: 0 0 5px #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }
        to { 
            box-shadow: 0 0 15px #00ff00, 0 0 25px #00ff00;
            text-shadow: 0 0 10px #00ff00;
        }
    }

    @keyframes matrixTitleGlow {
        0%, 100% { 
            text-shadow: 0 0 10px #00ff00;
            filter: brightness(1);
        }
        50% { 
            text-shadow: 0 0 20px #00ff00, 0 0 30px #00ff00;
            filter: brightness(1.2);
        }
    }

    @keyframes glitchEffect {
        0%, 100% { 
            transform: translateX(0);
            text-shadow: 0 0 5px #00ff00;
        }
        20% { 
            transform: translateX(-2px);
            text-shadow: -2px 0 #ff0000, 2px 0 #00ff00;
        }
        40% { 
            transform: translateX(2px);
            text-shadow: 2px 0 #ff0000, -2px 0 #00ff00;
        }
        60% { 
            transform: translateX(-1px);
            text-shadow: 1px 0 #ff0000, -1px 0 #00ff00;
        }
        80% { 
            transform: translateX(1px);
            text-shadow: -1px 0 #ff0000, 1px 0 #00ff00;
        }
    }

    @keyframes loadingProgress {
        from { width: 0; }
        to { width: 100%; }
    }

    @keyframes matrixRainFall {
        0% { 
            transform: translateY(-100vh);
            opacity: 1;
        }
        90% {
            opacity: 1;
        }
        100% { 
            transform: translateY(100vh);
            opacity: 0;
        }
    }

    @keyframes matrixGlitch {
        0%, 100% { 
            transform: translateX(0);
            filter: hue-rotate(0deg);
        }
        20% { 
            transform: translateX(-2px);
            filter: hue-rotate(90deg);
        }
        40% { 
            transform: translateX(2px);
            filter: hue-rotate(180deg);
        }
        60% { 
            transform: translateX(-1px);
            filter: hue-rotate(270deg);
        }
        80% { 
            transform: translateX(1px);
            filter: hue-rotate(360deg);
        }
    }

    @keyframes terminalPromptSlide {
        0% { 
            opacity: 0;
            transform: translateX(-100%);
        }
        10%, 90% {
            opacity: 1;
            transform: translateX(0);
        }
        100% {
            opacity: 0;
            transform: translateX(-100%);
        }
    }

    /* Additional Matrix Mode Refinements */
    .matrix-mode-active .floating-shapes .shape {
        background: rgba(0, 255, 0, 0.3) !important;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
    }

    .matrix-mode-active .hero-stats {
        border-top: 1px solid #00ff00;
        border-bottom: 1px solid #00ff00;
        padding: 2rem 0;
        margin: 2rem 0;
    }

    /* Scrollbar for Matrix mode */
    .matrix-mode-active::-webkit-scrollbar {
        width: 12px;
    }

    .matrix-mode-active::-webkit-scrollbar-track {
        background: #000000;
    }

    .matrix-mode-active::-webkit-scrollbar-thumb {
        background: #00ff00;
        border-radius: 6px;
        box-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
    }

    .matrix-mode-active::-webkit-scrollbar-thumb:hover {
        background: #ffffff;
    }
}